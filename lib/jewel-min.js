window.addEventListener("load",function(){Jewel.Load()});var Jewel=function(a){Jewel.__callback=a;Jewel.__viewports=[]};Jewel.Load=function(){Jewel.__callback()};Jewel.Add=function(a){0>Jewel.__viewports.indexOf(a)&&Jewel.__viewports.push(a)};Jewel.Paint=function(){console.log("Paint");for(var a=Jewel.__viewports,b=0,c=a.length;b<c;b++)document.body.contains(a[b].__element)&&document.body.removeChild(a[b].__element),a[b].Paint(),document.body.contains(a[b].__element)||document.body.appendChild(a[b].__element)};
Jewel.Update=function(){for(var a=Jewel.__viewports,b=0,c=a.length;b<c;b++)a[b].Update()};Jewel.Button=function(a){this.__identifier="button";this.__text=a||"";this.__element=void 0;this.__events=[]};
Jewel.Button.prototype={SetText:function(a){this.__text=a},GetText:function(){return this.__text},AddEvent:function(a,b){this.__events.push({event:a,callback:b})},Paint:function(){this.__element=document.createElement("button");this.Update()},Update:function(){if(this.__element){var a=this.__element;a.innerHTML=this.__text;for(var b=this.__events,c=0,d=b.length;c<d;c++)a.removeEventListener(b[c].event,b[c].callback),a.addEventListener(b[c].event,b[c].callback)}}};
Jewel.TextBox=function(a){this.__identifier="textbox";this.__text=a||"";this.__element=void 0;this.__events=[]};
Jewel.TextBox.prototype={SetText:function(a){this.__text=a},GetText:function(){this.SetText(this.__element.value);return this.__text},AddEvent:function(a,b){this.__events.push({event:a,callback:b})},Paint:function(){this.__element=document.createElement("input");this.Update()},Update:function(){if(this.__element){var a=this.__element;a.type="text";a.value=this.__text;for(var b=this.__events,c=0,d=b.length;c<d;c++)a.removeEventListener(b[c].event,b[c].callback),a.addEventListener(b[c].event,b[c].callback);
a.addEventListener("change",this.GetText)}}};Jewel.Viewport=function(){this.__controls=[];this.__element=void 0};Jewel.Viewport.prototype={Add:function(a){return 0>this.__controls.indexOf(a)?(this.__controls.push(a),!0):!1},Paint:function(){this.__element=document.createElement("div");this.Update()},Update:function(){if(this.__element)for(var a=this.__element,b=this.__controls,c=0,d=b.length;c<d;c++)a.contains(b[c].__element)?b[c].Update():(b[c].Paint(),a.appendChild(b[c].__element))}};
Jewel.Text=function(a){this.__identifier="text";this.__text=a||"";this.__element=void 0};Jewel.Text.prototype={SetText:function(a){this.__text=a;this.__update=!0},GetText:function(){return this.__text},Paint:function(){this.__element=document.createElement("div");this.Update()},Update:function(){this.__element&&(this.__element.innerHTML=this.__text)}};
